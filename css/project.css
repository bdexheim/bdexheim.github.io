/* --- 1. THEME & RESET --- */
html, body {
    background-color: #0f0f0f !important;
    color: #e4e4e4;
    margin: 0;
    padding: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Inter", sans-serif;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
}

:root {
    --side-margin: 6vw;
    --gutter: 2rem;
    --text-dim: #a0a0a0;
    --border: #2a2a2a;
    --space-xl: 10rem;
    --space-l: 2.5rem;
}

/* --- 2. THE 14-COLUMN ENGINE --- */
/* We apply the grid to the internal wrappers found in your HTML */
.site-header,
.container,
.footer-grid {
    display: grid !important;
    grid-template-columns: var(--side-margin) repeat(12, 1fr) var(--side-margin);
    column-gap: var(--gutter);
    width: 100%;
}

/* --- 3. GLOBAL HEADER --- */
.site-header {
    padding: 2rem 0 1rem 0;
    border-bottom: 1px solid var(--border);
    align-items: center;
}

.brand {
    grid-column: 2 / span 5; /* Starts name at Col 2 */
}

.site-nav {
    grid-column: 7 / span 7; /* Ends "Back to Work" at Col 13 */
    display: flex;
    justify-content: flex-end;
}

.site-title, .nav-list a {
    color: #fff;
    text-decoration: none;
    font-weight: 500;
}

.nav-list { list-style: none; margin: 0; padding: 0; }

.skip-link {
    position: absolute;
    left: var(--side-margin);
    top: 1rem;
    color: var(--text-dim);
    font-size: 0.8rem;
    text-decoration: none;
}

/* --- 4. PROJECT TITLE & HERO --- */
/* 1. The Parent Grid */
.case-study-header {
    display: grid !important;
    grid-template-columns: var(--side-margin) repeat(12, 1fr) var(--side-margin);
    column-gap: var(--gutter);
    width: 100%;
}

/* 2. The Text Wrapper */
.case-study-header .container {
    grid-column: 2 / span 12; /* This puts the container in the right spot */
    display: contents;        /* MAGIC LINE: This makes the container "invisible" to the grid 
                                 so that .header-content behaves like a direct child */
}

/* 3. The Title/Subtitle Area */
.header-content {
    grid-column: 2 / span 12; /* Now this will align perfectly to Column 2 */
    margin: 0.5rem 0 0 0;
    display: block !important;
}

/* 4. The Hero Image */
.hero-figure {
    grid-column: 3 / span 10; /* This starts at Column 3 */
    margin: 0 0 6rem 0;
}

.hero-figure img {
    object-fit: fill;
    border-radius: 8px;
    border: 1px solid var(--border);
}

/* --- 5. METADATA SECTION --- */
.meta-section {
    border-top: 1px solid var(--border);
    border-bottom: 1px solid var(--border);
}

.meta-section .grid-container {
    display: grid !important;
    grid-template-columns: var(--side-margin) repeat(12, 1fr) var(--side-margin);
    column-gap: var(--gutter);
    width: 100%;
}

/* grid-container is the 14-column parent here */
.meta-section .meta-block:first-child {
    grid-column: 2 / span 3 !important;
}

.meta-section .meta-block {
    grid-column: span 3;
    padding: 4rem 0;
}


.small-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    color: var(--text-dim);
    margin-bottom: 0.5rem;
    display: block;
}

/* --- 6. LONG-FORM CONTENT --- */
.section {
    padding: var(--space-l) 0;
}

.content-text {
    grid-column: 2 / span 8;
}

.section-label {
    font-size: 0.8rem;
    text-transform: uppercase;
    color: var(--text-dim);
    margin-bottom: 2rem;
}

/* --- 7. MEDIA GRIDS & WIDE MEDIA --- */
.media-grid {
    grid-column: 2 / span 12;
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    column-gap: var(--gutter);
    margin-top: 2rem;
}

.grid-item { grid-column: span 4}

.grid-item img {
    width: 100%;
    height: 100%;
    aspect-ratio: 12 / 13; 
    object-fit: contain;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;}

.media-wide {
    grid-column: 2 / span 10;
    margin-top: 2rem;
}

img, video { width: 100%; height: auto; display: block; aspect-ratio: 16 / 9; 
    object-fit: contain;}

figcaption {
    font-size: 0.85rem;
    color: var(--text-dim);
    margin-top: 1rem;
    border-top: 1px solid var(--border);
    padding-top: 0.5rem;
}

/* ---8. Video format --- */

.viz-list { grid-column: 2 / span 12; }

.viz-card {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    column-gap: var(--gutter);
    margin-bottom: 12rem;
    align-items: start;
}

.viz-vid{ 
    grid-column: 1 / span 8; 
    background: #1a1a1a;
    aspect-ratio: 16 / 9;
    width: 100%;
    object-fit: cover;
    
    /* Matching your image styles */
    border: 1px solid var(--border);
    border-radius: 12px;
    
    /* Ensures the video doesn't "bleed" past the rounded corners */
    overflow: hidden; 
    display: block;
}


.viz-details { grid-column: 10 / span 3; }

/* Alternating Project Layout */
.viz-card:nth-child(even) .viz-vid{ grid-column: 5 / span 8; }
.viz-card:nth-child(even) .viz-details { grid-column: 1 / span 4; grid-row: 1; }

.viz-title { font-size: 1.75rem; margin-bottom: 1rem; }
.viz-summary { color: var(--text-dim); margin-bottom: 2rem; }

/* --- Exploration Layouts --- */

/* Process Row: Text(4) + Img(4) + Img(4) */
.process-row {
    display: grid !important;
    grid-template-columns: var(--side-margin) repeat(12, 1fr) var(--side-margin);
    column-gap: var(--gutter);
    margin-bottom: var(--space-l);
    align-items: start; /* Ensures all items align at the top */
}

.process-text {
    grid-column: 2 / span 4;
}

.process-media {
    grid-column: span 4;
}

.process-media-wide {
    grid-column: span 8;
}

/* Results Row: 3 Images (span 4 each) */
.results-row {
    display: grid !important;
    grid-template-columns: var(--side-margin) repeat(12, 1fr) var(--side-margin);
    column-gap: var(--gutter);
    row-gap: 2rem;
    margin-bottom: var(--space-l);
    align-items: start; /* Crucial for keeping top edges aligned */
}

.results-row .section-header {
    grid-column: 2 / span 12;
    margin-bottom: 0rem;
}

.result-item {
    grid-column: span 4;
}

/* FIXED: Changed grid-column-start to the shorthand grid-column */
.results-row .result-item:nth-of-type(2) {
    grid-column: 2 / span 4 !important; 
}

/* --- Modern Image & Caption Styling --- */
/* Target the image directly for the aspect ratio */
.process-media img, 
.result-item img {
    width: 100%;
    height: auto;           /* Let aspect-ratio define height */
    aspect-ratio: 4 / 5;    
    object-fit: cover;
    border: 1px solid var(--border);
    border-radius: 12px;
    display: block;
}

.process-media-wide img {
     width: 100%;
    height: auto;           /* Let aspect-ratio define height */
    aspect-ratio: 8 / 5;    
    object-fit: cover;
    border: 1px solid var(--border);
    border-radius: 12px;
    display: block;
}

figcaption {
    font-size: 0.85rem;
    color: var(--text-dim);
    margin-top: 1rem;
    line-height: 1.4;
    /* Ensure captions don't force different container heights */
    display: block; 
}

/* --- 9. GLOBAL FOOTER --- */
.site-footer {
    padding: 6rem 0;
    border-top: 1px solid var(--border);
    margin-top: var(--space-xl);
}

.footer-links {
    grid-column: 2 / span 6; /* Starts at Col 2 */
}

.footer-copy {
    grid-column: 8 / span 6; /* Ends at Col 13 */
    text-align: right;
    color: #666;
}

.footer-links a {
    color: var(--text-dim);
    text-decoration: none;
    margin-right: 2rem;
}

/* --- 9. MOBILE --- */
/* --- COMPREHENSIVE MOBILE OVERRIDES --- */
@media (max-width: 900px) {
    /* 1. Reset the Grid Engine to a single column */
    .site-header, 
    .container, 
    .footer-grid, 
    .case-study-header, 
    .meta-section .grid-container, 
    .process-row, 
    .results-row {
        display: flex !important;
        flex-direction: column !important;
        padding: 0 1.5rem !important; /* Standard mobile gutter */
    }

    /* 2. Reset specific grid-column spans to full width */
    .brand, .site-nav, .header-content, .hero-figure, 
    .meta-block, .process-text, .process-media, .result-item,
    .footer-links, .footer-copy, .content-text {
        grid-column: auto !important;
        width: 100% !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
    }

    /* 3. Adjust Spacing */
    .hero-figure { margin-bottom: 3rem; }
    .meta-block { padding: 1.5rem 0; border-bottom: 1px solid var(--border); }
    .process-row, .results-row { gap: 2.5rem; }
    
    /* 4. Fix Navigation */
    .site-nav {
        justify-content: flex-start;
        margin-top: 1rem;
    }
    
    .footer-copy {
        text-align: left;
        margin-top: 2rem;
    }

    /* 5. Ensure images maintain aspect ratio without stretching */
    .hero-figure img, .result-item img, .process-media img {
        height: auto !important;
        aspect-ratio: auto !important; /* Optional: allows images to show full height on mobile */
    }
}